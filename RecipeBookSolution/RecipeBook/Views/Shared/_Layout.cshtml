<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Online Kucharka - @ViewData["Title"]</title>

    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/RecipeBook.styles.css" asp-append-version="true" />              

</head>
<body>                                                                       
    <header class="header">
        <div class="headerDiv">

            <div class="searchContainer">
                <div class="searchTypeContainer">
                    <select id="searchType" class="searchTypeSelect" style="display: none;">
                        <option value="recipes">📖 Recepty</option>
                        <option value="ingredients">🛒 Ingredience</option>
                    </select>
                    <div class="customDropdown">
                        <div class="dropdownButton">📖 Recepty</div>
                        <div class="dropdownMenu" id="dropdownMenu">
                            <div class="dropdownOption" data-value="recipes">📖 Recepty</div>
                            <div class="dropdownOption" data-value="ingredients">🛒 Ingredience</div>
                        </div>
                    </div>
                </div>
                <div class="input-container">
                    <input class="vyhledavaniReceptu"
                           id="searchInput"
                           name="text"
                           type="text"
                           placeholder="Hledat..."
                           spellcheck="false" />
                    <div class="suggestionsContainer" id="suggestionsContainer"></div>
                    <div class="vyhledavaniLupa">
                        <img class="iconSearch" src="~/img/Icon - Magnifying glass.svg" alt="">
                    </div>
                </div>
            </div>

            <div class="accountIcon">
                @if (User?.Identity?.IsAuthenticated == true)
                {
                    var email = User.Identity.Name ?? User.FindFirst(System.Security.Claims.ClaimTypes.Email)?.Value ?? "";
                    var initial = !string.IsNullOrEmpty(email) ? email.Trim()[0].ToString().ToUpper() : "U";
                    // deterministic color from email hash
                    var colors = new[] {
                        "#ae74cc", "#56B385", "#2d8cf0", "#f39c12", "#e74c3c", "#9b59b6", "#1abc9c",
                        "#34495e", "#16a085", "#27ae60", "#2980b9", "#8e44ad", "#2ecc71", "#e67e22",
                        "#d35400", "#c0392b", "#7f8c8d", "#bdc3c7", "#e84393", "#00b894", "#6c5ce7",
                        "#fd79a8", "#00cec9", "#0984e3", "#ffeaa7", "#fab1a0", "#f8c291", "#e056fd",
                        "#74b9ff", "#55efc4", "#ff7675", "#fdcb6e"
                    };
                    var idx = Math.Abs((email ?? "").GetHashCode()) % colors.Length;
                    var color = colors[idx];

                    <a href="/home/Account" data-bs-toggle="tooltip" title="Přihlášen: @email">
                        <div class="accountAvatar" style="background:@color">@initial</div>
                    </a>
                }
                else
                {
                    <a href="/home/Account" data-bs-toggle="tooltip" title="Váš účet">
                        <img src="~/img/Icon-AccountLightGrey.png" alt="Icon">
                    </a>
                }
            </div>

        </div>
    </header>   
    
    <div class="sidebar">
        <div class="sideNav">

            <a href="/home"
               data-bs-toggle="tooltip"
               data-bs-html="true"
               title="<b></b><span style='color:gray;'>Hlavní stránka</span>">
                <img src="~/img/Icon - Home.svg" alt="Icon">
            </a>

            <a href="/home/categories" data-bs-toggle="tooltip" title="Kategorie">
                <img src="~/img/Icon - Categories.svg" alt="Icon">
            </a>           

            <a href="/home/CreateRecipe" data-bs-toggle="tooltip" title="Vytvořit recept">
                <img src="~/img/Icon - Create new.svg" alt="Icon">
            </a>

            <a href="/home/Bookmarks" data-bs-toggle="tooltip" title="Oblíbené recepty">
                <img src="~/img/Icon - Favorites.svg" alt="Icon">
            </a>
        </div>


        <div class="signOut">
            <a href="/home/SignOut" data-bs-toggle="tooltip" title="Odhlásit se">
                <img src="~/img/Icon - Sign out.svg" alt="Icon">
            </a>

        </div>

    </div>

    <div class="pouzitelnyView">

        @RenderBody()

    </div>


@*     <div class="container">
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
    </div> *@
    
    @* <footer class="">
        <div class="footer">
            &copy; 2025 - OnlineKucharka - <a asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
        </div>
    </footer> *@    

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>

    @await RenderSectionAsync("Scripts", required: false)

</body>
</html>
